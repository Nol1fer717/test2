# Инструкция по запуску тестов в IntelliJ IDEA

## Предварительные требования

1. **IntelliJ IDEA** (Community или Ultimate Edition)
2. **Java 17** или выше
3. **Maven** (встроен в IntelliJ IDEA)

---

## Шаг 1: Открытие проекта

1. Откройте IntelliJ IDEA
2. Выберите `File → Open`
3. Выберите папку проекта `test2`
4. Нажмите `OK`
5. В диалоге "Trust Project" нажмите `Trust Project`
6. Дождитесь индексации и загрузки зависимостей Maven

---

## Шаг 2: Настройка JDK

1. Перейдите в `File → Project Structure` (или `Ctrl+Alt+Shift+S`)
2. В разделе `Project` выберите SDK: `Java 17` или выше
3. Нажмите `Apply` и `OK`

---

## Шаг 3: Установка браузеров Playwright

### Вариант 1: Через Run Configuration (рекомендуется)

1. В верхней панели выберите конфигурацию `Install Playwright Browsers`
2. Нажмите зелёную кнопку ▶️ (Run)
3. Дождитесь завершения установки браузеров

### Вариант 2: Через терминал

1. Откройте терминал в IDEA: `View → Tool Windows → Terminal`
2. Выполните команду:
```bash
mvn exec:java -e -D exec.mainClass=com.microsoft.playwright.CLI -D exec.args="install"
```

---

## Шаг 4: Запуск тестов

### Доступные конфигурации запуска

В выпадающем списке конфигураций (вверху справа) доступны:

| Конфигурация | Описание |
|--------------|----------|
| `All Tests` | Запуск всех тестов (headless режим) |
| `All Tests (Visible Browser)` | Запуск всех тестов с видимым браузером |
| `Create Task Tests` | Только тесты создания задачи |
| `Search Task Tests` | Только тесты поиска |
| `Task Card Tests` | Только тесты карточки задачи |
| `Board Navigation Tests` | Только тесты навигации по доске |
| `Install Playwright Browsers` | Установка браузеров |

### Как запустить:

1. Выберите нужную конфигурацию в выпадающем списке
2. Нажмите ▶️ (Run) или `Shift+F10`

---

## Шаг 5: Запуск отдельных тестов

### Из редактора кода:

1. Откройте любой тестовый класс (например, `CreateTaskTests.java`)
2. Нажмите на зелёную стрелку ▶️ слева от имени класса или метода
3. Выберите `Run 'имя теста'`

### Из панели Project:

1. Откройте `src/test/java/tests/`
2. Правый клик на тестовом классе
3. Выберите `Run 'ClassName'`

---

## Шаг 6: Просмотр результатов

1. Результаты отображаются в панели `Run` внизу экрана
2. Зелёная галочка ✓ — тест пройден
3. Красный крестик ✗ — тест провален
4. Кликните на упавший тест, чтобы увидеть детали ошибки

---

## Дополнительные настройки

### Запуск с видимым браузером (для отладки)

Используйте конфигурацию `All Tests (Visible Browser)` или измените в `BaseTest.java`:

```java
.setHeadless(false)
```

### Увеличение таймаута

В `BaseTest.java` измените значение:

```java
page.setDefaultTimeout(60000); // 60 секунд
```

### Замедление выполнения (для отладки)

В `BaseTest.java` увеличьте `slowMo`:

```java
.setSlowMo(500) // 500 мс между действиями
```

---

## Горячие клавиши

| Действие | Клавиши |
|----------|---------|
| Запустить выбранную конфигурацию | `Shift+F10` |
| Запустить в режиме отладки | `Shift+F9` |
| Запустить тест под курсором | `Ctrl+Shift+F10` |
| Перезапустить последний тест | `Ctrl+F5` |
| Остановить выполнение | `Ctrl+F2` |

---

## Структура тестов

```
src/test/java/
├── tests/
│   ├── CreateTaskTests.java      # TC1-TC6: Создание задачи
│   ├── SearchTaskTests.java      # TC7-TC13: Поиск задачи
│   ├── TaskCardTests.java        # TC18-TC21: Карточка задачи
│   └── BoardNavigationTests.java # TC15-TC17: Навигация по доске
└── utils/
    └── BaseTest.java             # Базовая конфигурация
```

---

## Troubleshooting

### Проблема: "Cannot resolve symbol 'playwright'"

**Решение:** Обновите зависимости Maven:
- Правый клик на `pom.xml` → `Maven` → `Reload Project`

### Проблема: "Browser not found"

**Решение:** Запустите конфигурацию `Install Playwright Browsers`

### Проблема: Тесты падают с таймаутом

**Решение:**
1. Проверьте интернет-соединение
2. Увеличьте таймаут в `BaseTest.java`
3. Запустите с видимым браузером для диагностики

### Проблема: Конфигурации запуска не отображаются

**Решение:**
1. Перейдите в `Run → Edit Configurations`
2. Нажмите `+` → `JUnit`
3. Настройте вручную:
   - Test kind: `All in package`
   - Package: `tests`
   - Use classpath of module: `task-tracker-tests`
